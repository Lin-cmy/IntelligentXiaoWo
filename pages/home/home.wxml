<!-- ф╕╗щб╡хо╣хЩи -->
<!-- <view class="container"> -->
  <!-- щб╢щГицаЗщвШхМ║хЯЯ -->
  <view class="header-section">
    <view class="title-section" bindtap="onTitleTap">
      <text class="home-title">{{homeName}}</text>
      <view class="triangle-down"></view>
    </view>
    <view class="refresh-button {{isRefreshing ? 'refreshing' : ''}}" bindtap="onRefreshTap">
      <text class="refresh-icon">тЖ╗</text>
    </view>
  </view>

  <!-- цИ┐щЧ┤чнЫщАЙцаП -->
  <scroll-view class="filter-bar" scroll-x enhanced show-scrollbar="{{false}}">
    <view class="filter-item {{selectedRoomId == '0' ? 'active' : ''}}" bindtap="onFilterTap" data-roomid='0'>
      <text>хЕищГи</text>
    </view>
    <block wx:for="{{rooms}}" wx:key="id">
      <view class="filter-item {{selectedRoomId == item.id ? 'active' : ''}}" bindtap="onFilterTap" data-roomId="{{item.id}}">
        <text>{{item.name}}</text>
      </view>
    </block>
  </scroll-view>

  <!-- шо╛хдЗч╜Сца╝ -->
  <view class="content-section">
    <view class="device-grid" wx:if="{{filteredDevices.length > 0}}">
      <block wx:for="{{filteredDevices}}" wx:key="id">
        <view class="device-card" bindtap="onDeviceTap" data-id="{{item.id}}" data-name="{{item.name}}">
          <view class="device-icon-container">
            <image class="device-icon" src="{{item.icon || '/images/device-default.png'}}" mode="aspectFill" />
          </view>
          <text class="device-name">{{item.name}}</text>
          <view class="device-status">
            <text class="status-dot active"></text>
            <text>хЬич║┐</text>
          </view>
        </view>
      </block>
    </view>
    
    <!-- цЧашо╛хдЗцЧ╢цШ╛чд║ -->
    <view class="empty-devices" wx:else>
      <image class="empty-icon" src="/images/empty-device.png" mode="aspectFit"></image>
      <text>цЪВцЧашо╛хдЗ</text>
      <text class="empty-hint">шп╖хЕИц╖╗хКашо╛хдЗхИ░цндцИ┐щЧ┤</text>
    </view>
  </view>

  <!-- хо╢х║нщАЙцЛйх╝╣чкЧ -->
  <view class="popup-overlay" wx:if="{{showPopup}}" bindtap="onTitleTap" catchtouchmove="true"></view>
  <view class="popup" wx:if="{{showPopup}}">
    <block wx:for="{{homes}}" wx:key="id">
      <view class="popup-item" hover-class="popup-item-hover" bindtap="onFamilyChangeTap" data-id="{{item.id}}" data-name="{{item.name}}">
        <view class="home-icon">ЁЯПа</view>
        <text>{{item.name}}</text>
      </view>
    </block>
    <view class="popup-divider"></view>
    <view class="popup-item" hover-class="popup-item-hover" bindtap="onFamilyManagerTap">
      <view class="home-icon">тЪЩя╕П</view>
      <text>хо╢х║нчобчРЖ</text>
    </view>
    <view class="popup-item" hover-class="popup-item-hover" bindtap="onFamilyCreateTap">
      <view class="home-icon">тЮХ</view>
      <text>хИЫх╗║хо╢х║н</text>
    </view>
  </view>

  <!-- хИЫх╗║хо╢х║нх╝╣чкЧ -->
  <view class="modal-overlay" wx:if="{{showCreatePopup}}" bindtap="onPopupClose" catchtouchmove="true"></view>
  <view class="modal-content" wx:if="{{showCreatePopup}}">
    <view class="modal-header">
      <text class="modal-title">хИЫх╗║хо╢х║н</text>
    </view>
    <view class="modal-body">
      <view class="input-group">
        <text class="input-label">хо╢х║нхРНчз░</text>
        <input class="modal-input" placeholder="шп╖ш╛УхЕехо╢х║нхРНчз░" value="{{newFamilyName}}" bindinput="onFamilyNameInput" maxlength="20" />
      </view>
      <view class="input-group">
        <text class="input-label">хо╢х║нхЬ░хЭА</text>
        <input class="modal-input" placeholder="шп╖ш╛УхЕехо╢х║нхЬ░хЭА" value="{{newFamilyAddress}}" bindinput="onFamilyAddressInput" maxlength="20" />
      </view>
    </view>
    <view class="modal-footer">
      <button class="modal-btn cancel" bindtap="onPopupClose">хПЦц╢И</button>
      <button class="modal-btn confirm" bindtap="onConfirmCreate">чбохоЪ</button>
    </view>
  </view>
<!-- </view> -->