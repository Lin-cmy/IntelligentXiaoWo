<view class="container">
  <!-- åœºæ™¯åˆ—è¡¨ -->
  <view class="scene-list">
    <block wx:for="{{scenes}}" wx:for-index="sceneKey" wx:for-item="scene" wx:key="id">
        <view class="scene-item" bindtap="onSceneDetail" data-scene="{{sceneKey}}">
          <image class="scene-image" 
            src="{{scene.imagePath || '/images/scene/å®šåˆ¶å®¶å±….png'}}" 
            mode="aspectFill"></image>
          <view class="scene-info">
            <view class="scene-name">
              <text class="{{scene.iconClass || 'medal-icon'}}">
                {{scene.iconSymbol || 'ğŸ†'}}
              </text>
              <text>{{scene.name}}</text>
            </view>
            <view class="scene-desc">{{scene.desc}}</view>
            <view class="scene-users">é™„è¿‘{{randomUsers[sceneKey] || 3}}käººå·²å¯ç”¨</view>
          </view>

        <!-- åˆ é™¤æŒ‰é’®ï¼Œä»…åœ¨åˆ é™¤æ¨¡å¼ä¸‹æ˜¾ç¤º -->
        <view class="delete-btn" wx:if="{{isDeleteMode}}" catchtap="onDeleteScene" data-id="{{scene.id}}">
          <text class="delete-icon">-</text>
        </view>
      </view>
    </block>
  </view>

  <!-- åº•éƒ¨æŒ‰é’®åŒºåŸŸ -->
  <view class="bottom-buttons">
    <!-- åˆ é™¤æ¨¡å¼ä¸‹æ˜¾ç¤ºå®ŒæˆæŒ‰é’® -->
    <view class="complete-btn" wx:if="{{isDeleteMode}}" bindtap="exitDeleteMode">
      <text>å®Œæˆ</text>
    </view>
    
    <!-- éåˆ é™¤æ¨¡å¼ä¸‹æ˜¾ç¤ºæ·»åŠ å’Œåˆ é™¤æŒ‰é’® -->
    <view class="action-buttons" wx:if="{{!isDeleteMode}}">
      <view class="delete-scene-btn" bindtap="toggleDeleteMode">
        <text class="delete-mode-icon">-</text>
        <text>åˆ é™¤åœºæ™¯</text>
      </view>
      
      <view class="add-scene-btn" bindtap="showAddScenePopup">
        <text class="add-icon">+</text>
        <text>æ·»åŠ åœºæ™¯</text>
      </view>
    </view>
  </view>

  <!-- æ·»åŠ åœºæ™¯å¼¹çª— -->
  <view class="popup-mask" wx:if="{{showAddScenePopup}}" bindtap="hideAddScenePopup" catchtouchmove="true"></view>
  <view class="popup-content" wx:if="{{showAddScenePopup}}">
    <view class="popup-name">æ·»åŠ åœºæ™¯</view>
    <input class="popup-input" placeholder="åœºæ™¯åç§°" bindinput="onSceneNameInput" value="{{newSceneName}}"/>
    <input class="popup-input" placeholder="åœºæ™¯æè¿°" bindinput="onSceneDescInput" value="{{newSceneDesc}}"/>
    <view class="popup-buttons">
      <button class="popup-btn cancel" bindtap="hideAddScenePopup">å–æ¶ˆ</button>
      <button class="popup-btn confirm" bindtap="confirmAddScene">ç¡®è®¤</button>
    </view>
  </view>
</view>