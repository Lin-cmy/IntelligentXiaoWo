<!-- pages/device-detail/device-detail.wxml -->
<view class="detail-container">
  <!-- 顶部标题栏 -->
  <view class="header">
    <view class="back-btn" bindtap="onBack">
      <text class="back-icon">←</text>
    </view>
    <text class="device-title">{{deviceName}}</text>
  </view>
  
  <!-- 设备概览卡片 -->
  <view class="device-overview">
    <view class="device-icon-container">
      <view class="device-icon">📱</view>
    </view>
    <view class="device-basic-info">
      <view class="device-id">设备ID: {{deviceId}}</view>
      <view class="device-status" wx:if="{{deviceData.length > 0}}">
        <text class="status-dot active"></text>
        <text>在线</text>
      </view>
      <view class="device-status" wx:else>
        <text class="status-dot"></text>
        <text>离线</text>
      </view>
    </view>
  </view>

  <!-- 数据表格 -->
  <view class="data-section">
    <view class="section-title">设备数据</view>
    
    <view class="data-table-container">
      <view class="table-header">
        <view class="table-cell time-cell">更新时间</view>
        <view class="table-cell topic-cell">属性名称</view>
        <view class="table-cell value-cell">属性值</view>
      </view>
      
      <scroll-view class="table-body" scroll-y>
        <block wx:if="{{deviceData.length > 0}}">
          <view class="table-row" wx:for="{{deviceData}}" wx:key="id">
            <view class="table-cell time-cell">{{item.formattedTime}}</view>
            <view class="table-cell topic-cell">{{item.dataTopic}}</view>
            <view class="table-cell value-cell">{{item.dataValue}}</view>
          </view>
        </block>
        <view wx:else class="empty-data">
          <image class="empty-icon" src="/images/empty-data.png" mode="aspectFit"></image>
          <text>暂无设备数据</text>
        </view>
      </scroll-view>
    </view>
    
    <!-- 刷新按钮 -->
    <view class="refresh-container">
      <button class="refresh-btn" bindtap="refreshData">
        <text class="refresh-icon">↻</text>
        <text>刷新数据</text>
      </button>
    </view>
  </view>
  
  <!-- 设备控制区域 (如有需要) -->
  <view class="control-section">
    <view class="section-title">设备控制</view>
    <view class="control-panel">
      <view class="control-item" bindtap="toggleDevice">
        <view class="control-icon">⚡</view>
        <text>开关设备</text>
      </view>
      <view class="control-item" bindtap="resetDevice">
        <view class="control-icon">🔄</view>
        <text>重置设备</text>
      </view>
    </view>
  </view>
</view>